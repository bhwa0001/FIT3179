{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 900,
  "height": 600,
  "title": "Protected Areas by Region (2013-2024)",
  "data": {
    "url": "https://raw.githubusercontent.com/bhwa0001/FIT3179/main/protected-areas.csv",
    "format": {"type": "csv", "parse": {"2013": "number", "2014": "number", "2015": "number", "2016": "number", "2017": "number", "2018": "number", "2019": "number", "2020": "number", "2021": "number", "2022": "number", "2023": "number", "2024": "number"}}
  },
  "transform": [
    {
      "fold": ["2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024"],
      "as": ["Year", "ProtectedValue"]
    },
    {
      "calculate": "toNumber(datum.ProtectedValue)",
      "as": "ProtectedNumber"
    },
    {
      "filter": "isValid(datum.ProtectedNumber) && !isNaN(datum.ProtectedNumber) && datum.ProtectedNumber > 0 && (datum['Country Name'] == 'Africa Eastern and Southern' || datum['Country Name'] == 'Africa Western and Central' || datum['Country Name'] == 'Arab World' || datum['Country Name'] == 'Central Europe and the Baltics' || datum['Country Name'] == 'Caribbean small states' || datum['Country Name'] == 'East Asia & Pacific (excluding high income)' || datum['Country Name'] == 'East Asia & Pacific' || datum['Country Name'] == 'Europe & Central Asia (excluding high income)' || datum['Country Name'] == 'Europe & Central Asia' || datum['Country Name'] == 'Euro area' || datum['Country Name'] == 'European Union' || datum['Country Name'] == 'Latin America & Caribbean (excluding high income)' || datum['Country Name'] == 'Latin America & the Caribbean (IDA & IBRD countries)' || datum['Country Name'] == 'Latin America & Caribbean' || datum['Country Name'] == 'Middle East, North Africa, Afghanistan & Pakistan' || datum['Country Name'] == 'Middle East, North Africa, Afghanistan & Pakistan (excluding high income)' || datum['Country Name'] == 'North America' || datum['Country Name'] == 'South Asia' || datum['Country Name'] == 'Sub-Saharan Africa (excluding high income)' || datum['Country Name'] == 'Sub-Saharan Africa' || datum['Country Name'] == 'Pacific island small states' || datum['Country Name'] == 'World')"
    }

  ],
  "mark": "rect",
  "encoding": {
    "y": {
      "field": "Country Name", 
      "type": "nominal",
      "title": "Region",
      "sort": {"encoding": "x", "order": "ascending"}
    },
    "x": {
      "field": "Year",
      "type": "ordinal", 
      "title": "Year",
      "axis": {"labelAngle": 0}
    },
    "color": {
      "field": "ProtectedNumber",
      "type": "quantitative",
      "title": "Protected Areas (%)",
      "scale": {"scheme": "greens"}
    },
    "tooltip": [
      {"field": "Country Name", "type": "nominal", "title": "Region"},
      {"field": "Year", "type": "ordinal"},
      {"field": "ProtectedNumber", "type": "quantitative", "title": "Protected Areas (%)", "format": ".2f"}
    ]
  },
  "config": {
    "axis": {"grid": true},
    "view": {"stroke": null}
  }
}